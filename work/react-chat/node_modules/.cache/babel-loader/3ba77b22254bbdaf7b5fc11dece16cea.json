{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{fetchLogin,fetchLists}from'./services';import errorMessages from'./error-messages';import spinner from\"./spinner.svg\";var Login=function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var performLogin=function performLogin(){// if(!username) {\n//   setError(errorMessages.USERNAME_REQUIRED);\n//   return;\n// }\nsetError('');setIsLoading(true);fetchLogin(username).then(function(userInfo){setUsername('');fetchLists().then(function(usersMessagesList){onLogin(userInfo.username,usersMessagesList.messagesList,usersMessagesList.usersList,error);}).catch(function(err){setError(errorMessages[err.code||'DEFAULT']);onLogin(null,null,null,error);});}).catch(function(err){setUsername('');setError(errorMessages[err.code||'DEFAULT']);setIsLoading(false);onLogin(null,null,null,error);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"input\",{value:username,className:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),isLoading?/*#__PURE__*/React.createElement(\"img\",{alt:\"spinner\",src:spinner}):/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:performLogin},\"Login\"));};export default Login;","map":{"version":3,"sources":["C:/Users/sahanadi/Desktop/class/info6250/student--sahanadarsh/work/react-chat/src/Login.jsx"],"names":["React","useState","fetchLogin","fetchLists","errorMessages","Login","onLogin","username","setUsername","isLoading","setIsLoading","error","setError","performLogin","then","userInfo","usersMessagesList","messagesList","usersList","catch","err","code","e","target","value","spinner"],"mappings":"iNAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,YAAvC,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,C,mCAGA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eAEGL,QAAQ,CAAC,EAAD,CAFX,wCAEtBM,QAFsB,eAEZC,WAFY,8BAGKP,QAAQ,CAAC,KAAD,CAHb,yCAGtBQ,SAHsB,eAGXC,YAHW,8BAIHT,QAAQ,CAAC,EAAD,CAJL,yCAItBU,KAJsB,eAIfC,QAJe,eAM7B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB;AACA;AACA;AACA;AACAD,QAAQ,CAAC,EAAD,CAAR,CACAF,YAAY,CAAC,IAAD,CAAZ,CACAR,UAAU,CAACK,QAAD,CAAV,CACCO,IADD,CACO,SAACC,QAAD,CAAc,CACnBP,WAAW,CAAC,EAAD,CAAX,CACAL,UAAU,GACTW,IADD,CACO,SAACE,iBAAD,CAAuB,CAC5BV,OAAO,CAACS,QAAQ,CAACR,QAAV,CAAoBS,iBAAiB,CAACC,YAAtC,CAAoDD,iBAAiB,CAACE,SAAtE,CAAiFP,KAAjF,CAAP,CACD,CAHD,EAICQ,KAJD,CAIQ,SAACC,GAAD,CAAS,CACfR,QAAQ,CAACR,aAAa,CAACgB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAR,CACAf,OAAO,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmBK,KAAnB,CAAP,CACD,CAPD,EAQD,CAXD,EAYCQ,KAZD,CAYQ,SAACC,GAAD,CAAS,CACfZ,WAAW,CAAC,EAAD,CAAX,CACAI,QAAQ,CAACR,aAAa,CAACgB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAR,CACAX,YAAY,CAAC,KAAD,CAAZ,CACAJ,OAAO,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmBK,KAAnB,CAAP,CACD,CAjBD,EAkBD,CAzBD,CA2BA,mBACE,2BAAK,SAAS,CAAC,OAAf,eAEE,6BAAO,KAAK,CAAEJ,QAAd,CAAwB,SAAS,CAAC,UAAlC,CAA6C,QAAQ,CAAG,kBAACe,CAAD,QAAOd,CAAAA,WAAW,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAAxD,EAFF,CAGIf,SAAS,cACP,2BAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAEgB,OAAxB,EADO,cAEP,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAGZ,YAA3C,UALN,CADF,CAWD,CA5CD,CA8CA,cAAeR,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { fetchLogin, fetchLists } from './services';\r\nimport errorMessages from './error-messages';\r\nimport spinner from './spinner.svg';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const performLogin = () => {\r\n    // if(!username) {\r\n    //   setError(errorMessages.USERNAME_REQUIRED);\r\n    //   return;\r\n    // }\r\n    setError('');\r\n    setIsLoading(true);\r\n    fetchLogin(username)\r\n    .then( (userInfo) => {\r\n      setUsername('');\r\n      fetchLists()\r\n      .then( (usersMessagesList) => {\r\n        onLogin(userInfo.username, usersMessagesList.messagesList, usersMessagesList.usersList, error);\r\n      })\r\n      .catch( (err) => {\r\n        setError(errorMessages[err.code || 'DEFAULT']);\r\n        onLogin(null, null, null, error);\r\n      });\r\n    })\r\n    .catch( (err) => {\r\n      setUsername('');\r\n      setError(errorMessages[err.code || 'DEFAULT']);\r\n      setIsLoading(false);\r\n      onLogin(null, null, null, error);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      {/* <p className=\"error\">{error}</p> */}\r\n      <input value={username} className=\"username\" onChange={ (e) => setUsername(e.target.value) }/>\r\n      { isLoading ?\r\n          <img alt=\"spinner\" src={spinner}/> :\r\n          <button className=\"login-button\" onClick={ performLogin }>Login</button>\r\n      }\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}