{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{fetchLogin,fetchLists}from'./services';import errorMessages from'./error-messages';import spinner from\"./spinner.svg\";var Login=function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var performLogin=function performLogin(){if(!username){setError(errorMessages.USERNAME_REQUIRED);return;}setError('');setIsLoading(true);fetchLogin(username).then(function(userInfo){// setUsername('');\nfetchLists().then(function(usersMessagesList){onLogin(userInfo.username,usersMessagesList.messagesList,usersMessagesList.usersList);}).catch(function(err){setError(errorMessages[err.code||'DEFAULT']);});}).catch(function(err){// setUsername('');\nsetError(errorMessages[err.code||'DEFAULT']);setIsLoading(false);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},error),/*#__PURE__*/React.createElement(\"input\",{value:username,className:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),isLoading?/*#__PURE__*/React.createElement(\"img\",{alt:\"spinner\",src:spinner}):/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:performLogin},\"Login\"));};export default Login;","map":{"version":3,"sources":["C:/Users/sahanadi/Desktop/class/info6250/student--sahanadarsh/work/react-chat/src/Login.jsx"],"names":["React","useState","fetchLogin","fetchLists","errorMessages","Login","onLogin","username","setUsername","isLoading","setIsLoading","error","setError","performLogin","USERNAME_REQUIRED","then","userInfo","usersMessagesList","messagesList","usersList","catch","err","code","e","target","value","spinner"],"mappings":"iNAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,YAAvC,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,C,mCAGA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eAEGL,QAAQ,CAAC,EAAD,CAFX,wCAEtBM,QAFsB,eAEZC,WAFY,8BAGKP,QAAQ,CAAC,KAAD,CAHb,yCAGtBQ,SAHsB,eAGXC,YAHW,8BAIHT,QAAQ,CAAC,EAAD,CAJL,yCAItBU,KAJsB,eAIfC,QAJe,eAM7B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAG,CAACN,QAAJ,CAAc,CACZK,QAAQ,CAACR,aAAa,CAACU,iBAAf,CAAR,CACA,OACD,CACDF,QAAQ,CAAC,EAAD,CAAR,CACAF,YAAY,CAAC,IAAD,CAAZ,CACAR,UAAU,CAACK,QAAD,CAAV,CACCQ,IADD,CACO,SAACC,QAAD,CAAc,CACnB;AACAb,UAAU,GACTY,IADD,CACO,SAACE,iBAAD,CAAuB,CAC5BX,OAAO,CAACU,QAAQ,CAACT,QAAV,CAAoBU,iBAAiB,CAACC,YAAtC,CAAoDD,iBAAiB,CAACE,SAAtE,CAAP,CACD,CAHD,EAICC,KAJD,CAIQ,SAACC,GAAD,CAAS,CACfT,QAAQ,CAACR,aAAa,CAACiB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAR,CACD,CAND,EAOD,CAVD,EAWCF,KAXD,CAWQ,SAACC,GAAD,CAAS,CACf;AACAT,QAAQ,CAACR,aAAa,CAACiB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAR,CACAZ,YAAY,CAAC,KAAD,CAAZ,CACD,CAfD,EAgBD,CAvBD,CAyBA,mBACE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,OAAb,EAAsBC,KAAtB,CADF,cAEE,6BAAO,KAAK,CAAEJ,QAAd,CAAwB,SAAS,CAAC,UAAlC,CAA6C,QAAQ,CAAG,kBAACgB,CAAD,QAAOf,CAAAA,WAAW,CAACe,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAAxD,EAFF,CAGIhB,SAAS,cACP,2BAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAEiB,OAAxB,EADO,cAEP,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAGb,YAA3C,UALN,CADF,CAWD,CA1CD,CA4CA,cAAeR,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { fetchLogin, fetchLists } from './services';\r\nimport errorMessages from './error-messages';\r\nimport spinner from './spinner.svg';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const performLogin = () => {\r\n    if(!username) {\r\n      setError(errorMessages.USERNAME_REQUIRED);\r\n      return;\r\n    }\r\n    setError('');\r\n    setIsLoading(true);\r\n    fetchLogin(username)\r\n    .then( (userInfo) => {\r\n      // setUsername('');\r\n      fetchLists()\r\n      .then( (usersMessagesList) => {\r\n        onLogin(userInfo.username, usersMessagesList.messagesList, usersMessagesList.usersList);\r\n      })\r\n      .catch( (err) => {\r\n        setError(errorMessages[err.code || 'DEFAULT']);\r\n      });\r\n    })\r\n    .catch( (err) => {\r\n      // setUsername('');\r\n      setError(errorMessages[err.code || 'DEFAULT']);\r\n      setIsLoading(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <p className=\"error\">{error}</p>\r\n      <input value={username} className=\"username\" onChange={ (e) => setUsername(e.target.value) }/>\r\n      { isLoading ?\r\n          <img alt=\"spinner\" src={spinner}/> :\r\n          <button className=\"login-button\" onClick={ performLogin }>Login</button>\r\n      }\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}