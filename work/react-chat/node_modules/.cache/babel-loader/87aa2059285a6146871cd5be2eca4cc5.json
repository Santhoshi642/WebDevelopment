{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{fetchLogin,fetchLists}from'./services';import errorMessages from'./error-messages';import spinner from\"./spinner.svg\";var Login=function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var performLogin=function performLogin(){setIsLoading(true);fetchLogin(username).then(function(userInfo){setUsername('');fetchLists().then(function(usersMessagesList){onLogin(userInfo.username,usersMessagesList.messagesList,usersMessagesList.usersList,'');}).catch(function(err){onLogin('',[],{},errorMessages[err.code||'DEFAULT']);});}).catch(function(err){setUsername('');setIsLoading(false);onLogin('',[],{},errorMessages[err.code||'DEFAULT']);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"input\",{value:username,className:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),isLoading?/*#__PURE__*/React.createElement(\"img\",{alt:\"spinner\",src:spinner}):/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:performLogin},\"Login\"));};export default Login;","map":{"version":3,"sources":["C:/Users/sahanadi/Desktop/class/info6250/student--sahanadarsh/work/react-chat/src/Login.jsx"],"names":["React","useState","fetchLogin","fetchLists","errorMessages","Login","onLogin","username","setUsername","isLoading","setIsLoading","performLogin","then","userInfo","usersMessagesList","messagesList","usersList","catch","err","code","e","target","value","spinner"],"mappings":"iNAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,YAAvC,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,C,mCAGA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eAEGL,QAAQ,CAAC,EAAD,CAFX,wCAEtBM,QAFsB,eAEZC,WAFY,8BAGKP,QAAQ,CAAC,KAAD,CAHb,yCAGtBQ,SAHsB,eAGXC,YAHW,eAK7B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBD,YAAY,CAAC,IAAD,CAAZ,CACAR,UAAU,CAACK,QAAD,CAAV,CACCK,IADD,CACO,SAACC,QAAD,CAAc,CACnBL,WAAW,CAAC,EAAD,CAAX,CACAL,UAAU,GACTS,IADD,CACO,SAACE,iBAAD,CAAuB,CAC5BR,OAAO,CAACO,QAAQ,CAACN,QAAV,CAAoBO,iBAAiB,CAACC,YAAtC,CAAoDD,iBAAiB,CAACE,SAAtE,CAAiF,EAAjF,CAAP,CACD,CAHD,EAICC,KAJD,CAIQ,SAACC,GAAD,CAAS,CACfZ,OAAO,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAcF,aAAa,CAACc,GAAG,CAACC,IAAJ,EAAY,SAAb,CAA3B,CAAP,CACD,CAND,EAOD,CAVD,EAWCF,KAXD,CAWQ,SAACC,GAAD,CAAS,CACfV,WAAW,CAAC,EAAD,CAAX,CACAE,YAAY,CAAC,KAAD,CAAZ,CACAJ,OAAO,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAcF,aAAa,CAACc,GAAG,CAACC,IAAJ,EAAY,SAAb,CAA3B,CAAP,CACD,CAfD,EAgBD,CAlBD,CAoBA,mBACE,2BAAK,SAAS,CAAC,OAAf,eACE,6BAAO,KAAK,CAAEZ,QAAd,CAAwB,SAAS,CAAC,UAAlC,CAA6C,QAAQ,CAAG,kBAACa,CAAD,QAAOZ,CAAAA,WAAW,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAAxD,EADF,CAEIb,SAAS,cACP,2BAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAEc,OAAxB,EADO,cAEP,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAGZ,YAA3C,UAJN,CADF,CAUD,CAnCD,CAqCA,cAAeN,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { fetchLogin, fetchLists } from './services';\r\nimport errorMessages from './error-messages';\r\nimport spinner from './spinner.svg';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const performLogin = () => {\r\n    setIsLoading(true);\r\n    fetchLogin(username)\r\n    .then( (userInfo) => {\r\n      setUsername('');\r\n      fetchLists()\r\n      .then( (usersMessagesList) => {\r\n        onLogin(userInfo.username, usersMessagesList.messagesList, usersMessagesList.usersList, '');\r\n      })\r\n      .catch( (err) => {\r\n        onLogin('', [], {}, (errorMessages[err.code || 'DEFAULT']) );\r\n      });\r\n    })\r\n    .catch( (err) => {\r\n      setUsername('');\r\n      setIsLoading(false);\r\n      onLogin('', [], {}, (errorMessages[err.code || 'DEFAULT']) );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <input value={username} className=\"username\" onChange={ (e) => setUsername(e.target.value) }/>\r\n      { isLoading ?\r\n          <img alt=\"spinner\" src={spinner}/> :\r\n          <button className=\"login-button\" onClick={ performLogin }>Login</button>\r\n      }\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}