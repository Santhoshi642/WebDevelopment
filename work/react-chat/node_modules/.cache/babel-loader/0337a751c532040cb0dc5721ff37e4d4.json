{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{fetchLogin,fetchLists}from'./services';import errorMessages from'./error-messages';import spinner from\"./spinner.svg\";var Login=function Login(_ref){var onLogin=_ref.onLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var performLogin=function performLogin(){setIsLoading(true);fetchLogin(username).then(function(userInfo){setUsername('');fetchLists().then(function(usersMessagesList){onLogin(userInfo.username,usersMessagesList.messagesList,usersMessagesList.usersList,'');}).catch(function(err){onLogin('',[],{},errorMessages[err.code||'DEFAULT']);});}).catch(function(err){setUsername('');setIsLoading(false);onLogin('',[],{},errorMessages[err.code||'DEFAULT']);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"input\",{value:username,className:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),isLoading?/*#__PURE__*/React.createElement(\"img\",{alt:\"spinner\",src:spinner}):/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:performLogin},\"Login\"));};export default Login;","map":{"version":3,"sources":["C:/Users/sahanadi/Desktop/class/info6250/student--sahanadarsh/work/react-chat/src/Login.jsx"],"names":["React","useState","fetchLogin","fetchLists","errorMessages","Login","onLogin","username","setUsername","isLoading","setIsLoading","performLogin","then","userInfo","usersMessagesList","messagesList","usersList","catch","err","code","e","target","value","spinner"],"mappings":"iNAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,YAAvC,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,C,mCAGA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eAEEL,QAAQ,CAAC,EAAD,CAFV,wCAEvBM,QAFuB,eAEbC,WAFa,8BAGIP,QAAQ,CAAC,KAAD,CAHZ,yCAGvBQ,SAHuB,eAGZC,YAHY,eAK9B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAC1BD,YAAY,CAAC,IAAD,CAAZ,CACAR,UAAU,CAACK,QAAD,CAAV,CACCK,IADD,CACO,SAACC,QAAD,CAAc,CACpBL,WAAW,CAAC,EAAD,CAAX,CACAL,UAAU,GACTS,IADD,CACO,SAACE,iBAAD,CAAuB,CAC7BR,OAAO,CAACO,QAAQ,CAACN,QAAV,CAAoBO,iBAAiB,CAACC,YAAtC,CAAoDD,iBAAiB,CAACE,SAAtE,CAAiF,EAAjF,CAAP,CACA,CAHD,EAICC,KAJD,CAIQ,SAACC,GAAD,CAAS,CAChBZ,OAAO,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAcF,aAAa,CAACc,GAAG,CAACC,IAAJ,EAAY,SAAb,CAA3B,CAAP,CACA,CAND,EAOA,CAVD,EAWCF,KAXD,CAWQ,SAACC,GAAD,CAAS,CAChBV,WAAW,CAAC,EAAD,CAAX,CACAE,YAAY,CAAC,KAAD,CAAZ,CACAJ,OAAO,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAcF,aAAa,CAACc,GAAG,CAACC,IAAJ,EAAY,SAAb,CAA3B,CAAP,CACA,CAfD,EAgBA,CAlBD,CAoBA,mBACG,2BAAK,SAAS,CAAC,OAAf,eACE,6BAAO,KAAK,CAAEZ,QAAd,CAAwB,SAAS,CAAC,UAAlC,CAA6C,QAAQ,CAAG,kBAACa,CAAD,QAAOZ,CAAAA,WAAW,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAAxD,EADF,CAEIb,SAAS,cACT,2BAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAEc,OAAxB,EADS,cAET,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAGZ,YAA3C,UAJJ,CADH,CAUA,CAnCD,CAqCA,cAAeN,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { fetchLogin, fetchLists } from './services';\r\nimport errorMessages from './error-messages';\r\nimport spinner from './spinner.svg';\r\n\r\nconst Login = ({ onLogin }) => {\r\n\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst performLogin = () => {\r\n\t\tsetIsLoading(true);\r\n\t\tfetchLogin(username)\r\n\t\t.then( (userInfo) => {\r\n\t\t\tsetUsername('');\r\n\t\t\tfetchLists()\r\n\t\t\t.then( (usersMessagesList) => {\r\n\t\t\t\tonLogin(userInfo.username, usersMessagesList.messagesList, usersMessagesList.usersList, '');\r\n\t\t\t})\r\n\t\t\t.catch( (err) => {\r\n\t\t\t\tonLogin('', [], {}, (errorMessages[err.code || 'DEFAULT']) );\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch( (err) => {\r\n\t\t\tsetUsername('');\r\n\t\t\tsetIsLoading(false);\r\n\t\t\tonLogin('', [], {}, (errorMessages[err.code || 'DEFAULT']) );\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n    <div className=\"login\">\r\n      <input value={username} className=\"username\" onChange={ (e) => setUsername(e.target.value) }/>\r\n      { isLoading ?\r\n        <img alt=\"spinner\" src={spinner}/> :\r\n        <button className=\"login-button\" onClick={ performLogin }>Login</button>\r\n      }\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}