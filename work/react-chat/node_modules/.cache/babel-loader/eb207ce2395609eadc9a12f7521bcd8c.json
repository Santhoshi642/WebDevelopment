{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchLoginStatus,fetchLists}from'./services';import errorMessages from'./error-messages';import Logout from'./Logout';import MessagesUsers from'./MessagesUsers';import Login from'./Login';import'./app.css';var App=function App(){var _useState=useState({isLoggedIn:false}),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){fetchLoginStatus().then(function(userInfo){fetchLists().then(function(usersMessagesList){setUserState({isLoggedIn:true,username:userInfo.username,messages:usersMessagesList.messagesList,users:usersMessagesList.usersList});}).catch(function(err){setError(errorMessages[err.code||'DEFAULT']);});});},[]);var login=function login(username,messages,users){setUserState({isLoggedIn:true,username:username,messages:messages,users:users});};var reload=function reload(messages,users){setUserState(_objectSpread({},userState,{messages:messages,users:users}));};var logout=function logout(){setUserState({isLoggedIn:false});setError('');};var content;if(userState.isLoggedIn){content=/*#__PURE__*/React.createElement(MessagesUsers,{user:userState,onReload:reload});}else{content=/*#__PURE__*/React.createElement(Login,{onLogin:login});}return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"p\",{className:\"heading\"},\" Chat App \"),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},error),/*#__PURE__*/React.createElement(Logout,{user:userState,onLogout:logout}),content);};export default App;","map":{"version":3,"sources":["C:/Users/sahanadi/Desktop/class/info6250/student--sahanadarsh/work/react-chat/src/App.jsx"],"names":["React","useState","useEffect","fetchLoginStatus","fetchLists","errorMessages","Logout","MessagesUsers","Login","App","isLoggedIn","userState","setUserState","error","setError","then","userInfo","usersMessagesList","username","messages","messagesList","users","usersList","catch","err","code","login","reload","logout","content"],"mappings":"iaAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,OAASC,gBAAT,CAA2BC,UAA3B,KAA6C,YAA7C,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAO,WAAP,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,eACkBR,QAAQ,CAAC,CAAES,UAAU,CAAE,KAAd,CAAD,CAD1B,wCACTC,SADS,eACEC,YADF,8BAEUX,QAAQ,CAAC,EAAD,CAFlB,yCAETY,KAFS,eAEFC,QAFE,eAIhBZ,SAAS,CAAE,UAAM,CACfC,gBAAgB,GACfY,IADD,CACO,SAAAC,QAAQ,CAAI,CACjBZ,UAAU,GACTW,IADD,CACO,SAACE,iBAAD,CAAuB,CAC5BL,YAAY,CAAC,CACXF,UAAU,CAAE,IADD,CAEXQ,QAAQ,CAAEF,QAAQ,CAACE,QAFR,CAGXC,QAAQ,CAAEF,iBAAiB,CAACG,YAHjB,CAIXC,KAAK,CAAEJ,iBAAiB,CAACK,SAJd,CAAD,CAAZ,CAMD,CARD,EASCC,KATD,CASQ,SAACC,GAAD,CAAS,CACfV,QAAQ,CAACT,aAAa,CAACmB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAR,CACD,CAXD,EAYD,CAdD,EAeD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACR,QAAD,CAAWC,QAAX,CAAqBE,KAArB,CAA+B,CAC3CT,YAAY,CAAC,CACXF,UAAU,CAAE,IADD,CAEXQ,QAAQ,CAARA,QAFW,CAGXC,QAAQ,CAARA,QAHW,CAIXE,KAAK,CAALA,KAJW,CAAD,CAAZ,CAMD,CAPD,CASA,GAAMM,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACR,QAAD,CAAWE,KAAX,CAAqB,CAClCT,YAAY,kBACPD,SADO,EAEVQ,QAAQ,CAARA,QAFU,CAGVE,KAAK,CAALA,KAHU,GAAZ,CAKD,CAND,CAQA,GAAMO,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBhB,YAAY,CAAC,CACXF,UAAU,CAAE,KADD,CAAD,CAAZ,CAGAI,QAAQ,CAAC,EAAD,CAAR,CACD,CALD,CAOA,GAAIe,CAAAA,OAAJ,CAEA,GAAGlB,SAAS,CAACD,UAAb,CAAyB,CACvBmB,OAAO,cAAG,oBAAC,aAAD,EAAe,IAAI,CAAElB,SAArB,CAAgC,QAAQ,CAAEgB,MAA1C,EAAV,CACD,CAFD,IAEO,CACLE,OAAO,cAAG,oBAAC,KAAD,EAAO,OAAO,CAAGH,KAAjB,EAAV,CACD,CAED,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,yBAAG,SAAS,CAAC,SAAb,eADF,cAEE,yBAAG,SAAS,CAAC,OAAb,EAAsBb,KAAtB,CAFF,cAGE,oBAAC,MAAD,EAAQ,IAAI,CAAEF,SAAd,CAAyB,QAAQ,CAAEiB,MAAnC,EAHF,CAIGC,OAJH,CADF,CAQD,CA9DD,CAgEA,cAAepB,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { fetchLoginStatus, fetchLists } from './services';\r\nimport errorMessages from './error-messages';\r\n\r\nimport Logout from './Logout';\r\nimport MessagesUsers from './MessagesUsers';\r\nimport Login from './Login';\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n  const [userState, setUserState] = useState({ isLoggedIn: false });\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect( () => {\r\n    fetchLoginStatus()\r\n    .then( userInfo => {\r\n      fetchLists()\r\n      .then( (usersMessagesList) => {\r\n        setUserState({\r\n          isLoggedIn: true,\r\n          username: userInfo.username,\r\n          messages: usersMessagesList.messagesList,\r\n          users: usersMessagesList.usersList,\r\n        });\r\n      })\r\n      .catch( (err) => {\r\n        setError(errorMessages[err.code || 'DEFAULT']);\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  const login = (username, messages, users) => {\r\n    setUserState({\r\n      isLoggedIn: true,\r\n      username,\r\n      messages,\r\n      users\r\n    });\r\n  };\r\n\r\n  const reload = (messages, users) => {\r\n    setUserState({\r\n      ...userState,\r\n      messages,\r\n      users\r\n    });\r\n  };\r\n\r\n  const logout = () => {\r\n    setUserState({\r\n      isLoggedIn: false\r\n    });\r\n    setError('');\r\n  };\r\n\r\n  let content;\r\n\r\n  if(userState.isLoggedIn) {\r\n    content = <MessagesUsers user={userState} onReload={reload}/>;\r\n  } else {\r\n    content = <Login onLogin={ login }/>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <p className=\"heading\"> Chat App </p>\r\n      <p className=\"error\">{error}</p>\r\n      <Logout user={userState} onLogout={logout}/>\r\n      {content}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}