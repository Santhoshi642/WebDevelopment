{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\sahanadi\\\\Desktop\\\\class\\\\info6250\\\\student--sahanadarsh\\\\work\\\\react-chat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchLoginStatus,fetchLists}from'./services';import errorMessages from'./error-messages';import Logout from'./Logout';import MessagesUsers from'./MessagesUsers';import Login from'./Login';import'./app.css';var App=function App(){var _useState=useState({isLoggedIn:false}),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){fetchLoginStatus().then(function(userInfo){fetchLists().then(function(usersMessagesList){setUserState({isLoggedIn:true,username:userInfo.username,messages:usersMessagesList.messagesList,users:usersMessagesList.usersList});}).catch(function(err){setError(errorMessages[err.code||'DEFAULT']);});});},[]);var login=function login(username,messages,users,errorMessage){setError(errorMessage);if(!errorMessage){setUserState({isLoggedIn:true,username:username,messages:messages,users:users});}};var reload=function reload(messages,users,errorMessage){setError(errorMessage);if(!errorMessage){setUserState(_objectSpread({},userState,{messages:messages,users:users}));}};var logout=function logout(errorMessage){setError(errorMessage);setUserState({isLoggedIn:false});};var content;if(userState.isLoggedIn){content=/*#__PURE__*/React.createElement(MessagesUsers,{user:userState,onReload:reload});}else{content=/*#__PURE__*/React.createElement(Login,{onLogin:login});}return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"p\",{className:\"heading\"},\" Chat App \"),/*#__PURE__*/React.createElement(Logout,{user:userState,onLogout:logout}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},error),content);};export default App;","map":{"version":3,"sources":["C:/Users/sahanadi/Desktop/class/info6250/student--sahanadarsh/work/react-chat/src/App.jsx"],"names":["React","useState","useEffect","fetchLoginStatus","fetchLists","errorMessages","Logout","MessagesUsers","Login","App","isLoggedIn","userState","setUserState","error","setError","then","userInfo","usersMessagesList","username","messages","messagesList","users","usersList","catch","err","code","login","errorMessage","reload","logout","content"],"mappings":"iaAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,gBAAT,CAA2BC,UAA3B,KAA6C,YAA7C,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAO,WAAP,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,eACiBR,QAAQ,CAAC,CAAES,UAAU,CAAE,KAAd,CAAD,CADzB,wCACVC,SADU,eACCC,YADD,8BAESX,QAAQ,CAAC,EAAD,CAFjB,yCAEVY,KAFU,eAEHC,QAFG,eAIjBZ,SAAS,CAAE,UAAM,CAChBC,gBAAgB,GACfY,IADD,CACO,SAAAC,QAAQ,CAAI,CAClBZ,UAAU,GACTW,IADD,CACO,SAACE,iBAAD,CAAuB,CAC7BL,YAAY,CAAC,CACZF,UAAU,CAAE,IADA,CAEZQ,QAAQ,CAAEF,QAAQ,CAACE,QAFP,CAGZC,QAAQ,CAAEF,iBAAiB,CAACG,YAHhB,CAIZC,KAAK,CAAEJ,iBAAiB,CAACK,SAJb,CAAD,CAAZ,CAMA,CARD,EASCC,KATD,CASQ,SAACC,GAAD,CAAS,CAChBV,QAAQ,CAACT,aAAa,CAACmB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAd,CAAR,CACA,CAXD,EAYA,CAdD,EAeA,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACR,QAAD,CAAWC,QAAX,CAAqBE,KAArB,CAA4BM,YAA5B,CAA6C,CAC1Db,QAAQ,CAACa,YAAD,CAAR,CACA,GAAG,CAACA,YAAJ,CAAiB,CAChBf,YAAY,CAAC,CACZF,UAAU,CAAE,IADA,CAEZQ,QAAQ,CAARA,QAFY,CAGZC,QAAQ,CAARA,QAHY,CAIZE,KAAK,CAALA,KAJY,CAAD,CAAZ,CAMA,CACD,CAVD,CAYA,GAAMO,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACT,QAAD,CAAWE,KAAX,CAAkBM,YAAlB,CAAmC,CACjDb,QAAQ,CAACa,YAAD,CAAR,CACA,GAAG,CAACA,YAAJ,CAAiB,CAChBf,YAAY,kBACRD,SADQ,EAEXQ,QAAQ,CAARA,QAFW,CAGXE,KAAK,CAALA,KAHW,GAAZ,CAKA,CACD,CATD,CAWA,GAAMQ,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACF,YAAD,CAAkB,CAChCb,QAAQ,CAACa,YAAD,CAAR,CACAf,YAAY,CAAC,CACZF,UAAU,CAAE,KADA,CAAD,CAAZ,CAGA,CALD,CAOA,GAAIoB,CAAAA,OAAJ,CAEA,GAAGnB,SAAS,CAACD,UAAb,CAAyB,CACxBoB,OAAO,cAAG,oBAAC,aAAD,EAAe,IAAI,CAAEnB,SAArB,CAAgC,QAAQ,CAAEiB,MAA1C,EAAV,CACA,CAFD,IAEO,CACNE,OAAO,cAAG,oBAAC,KAAD,EAAO,OAAO,CAAGJ,KAAjB,EAAV,CACA,CAED,mBACG,2BAAK,SAAS,CAAC,KAAf,eACE,yBAAG,SAAS,CAAC,SAAb,eADF,cAEE,oBAAC,MAAD,EAAQ,IAAI,CAAEf,SAAd,CAAyB,QAAQ,CAAEkB,MAAnC,EAFF,cAGE,yBAAG,SAAS,CAAC,OAAb,EAAsBhB,KAAtB,CAHF,CAIGiB,OAJH,CADH,CASA,CArED,CAuEA,cAAerB,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { fetchLoginStatus, fetchLists } from './services';\r\nimport errorMessages from './error-messages';\r\nimport Logout from './Logout';\r\nimport MessagesUsers from './MessagesUsers';\r\nimport Login from './Login';\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n\tconst [userState, setUserState] = useState({ isLoggedIn: false });\r\n\tconst [error, setError] = useState('');\r\n\r\n\tuseEffect( () => {\r\n\t\tfetchLoginStatus()\r\n\t\t.then( userInfo => {\r\n\t\t\tfetchLists()\r\n\t\t\t.then( (usersMessagesList) => {\r\n\t\t\t\tsetUserState({\r\n\t\t\t\t\tisLoggedIn: true,\r\n\t\t\t\t\tusername: userInfo.username,\r\n\t\t\t\t\tmessages: usersMessagesList.messagesList,\r\n\t\t\t\t\tusers: usersMessagesList.usersList,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch( (err) => {\r\n\t\t\t\tsetError(errorMessages[err.code || 'DEFAULT']);\r\n\t\t\t});\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst login = (username, messages, users, errorMessage) => {\r\n\t\tsetError(errorMessage);\r\n\t\tif(!errorMessage){\r\n\t\t\tsetUserState({\r\n\t\t\t\tisLoggedIn: true,\r\n\t\t\t\tusername,\r\n\t\t\t\tmessages,\r\n\t\t\t\tusers\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst reload = (messages, users, errorMessage) => {\r\n\t\tsetError(errorMessage);\r\n\t\tif(!errorMessage){\r\n\t\t\tsetUserState({\r\n\t\t\t\t...userState,\r\n\t\t\t\tmessages,\r\n\t\t\t\tusers\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst logout = (errorMessage) => {\r\n\t\tsetError(errorMessage);\r\n\t\tsetUserState({\r\n\t\t\tisLoggedIn: false\r\n\t\t});\r\n\t};\r\n\r\n\tlet content;\r\n\r\n\tif(userState.isLoggedIn) {\r\n\t\tcontent = <MessagesUsers user={userState} onReload={reload}/>;\r\n\t} else {\r\n\t\tcontent = <Login onLogin={ login }/>;\r\n\t}\r\n\r\n\treturn (\r\n    <div className=\"app\">\r\n      <p className=\"heading\"> Chat App </p>\r\n      <Logout user={userState} onLogout={logout}/>\r\n      <p className=\"error\">{error}</p>\r\n      {content}\r\n    </div>\r\n  );\r\n\r\n};\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}