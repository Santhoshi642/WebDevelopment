{"map":{"version":3,"sources":["static/js/main.998a6357.chunk.js"],"names":["this","push","module","exports","__webpack_require__","p","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","objectSpread2","slicedToArray","convertServiceError","err","Promise","reject","fetchLists","fetch","method","catch","code","then","response","ok","json","error_messages","DEFAULT","USERNAME_REQUIRED","MESSAGE_REQUIRED","NETWORK_ERROR","LOGIN_REQUIRED","LOGIN_UNAUTHORIZED","UID_MISSING","UID_UNKNOWN","src_Logout","_ref","user","onLogout","a","createElement","className","isLoggedIn","onClick","src_SendMessage","onRefresh","_useState","Object","_useState2","message","setMessage","value","onChange","e","target","messageText","headers","Headers","content-type","body","JSON","stringify","usersMessagesList","messagesList","usersList","MessagesList","messages","messageList","map","index","key","username","timestamp","text","UsersList","values","MessagesUsers","onReload","users","spinner","spinner_default","src_Login","onLogin","setUsername","_useState3","_useState4","isLoading","setIsLoading","alt","src","fetchLogin","userInfo","src_App","userState","setUserState","error","setError","content","errorMessage","Boolean","window","location","hostname","match","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console"],"mappings":"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"},"code":"(this[\"webpackJsonpreact-chat\"]=this[\"webpackJsonpreact-chat\"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n.p+\"static/media/spinner.414a23f5.svg\"},,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){\"use strict\";n.r(t);var a=n(0),s=n.n(a),c=n(3),o=n.n(c),r=(n(11),n(5)),i=n(1),u=function(e){return Promise.reject(e)},m=function(){return fetch(\"/lists\",{method:\"GET\"}).catch((function(){return Promise.reject({code:\"NETWORK_ERROR\"})})).then((function(e){return e.ok?e.json():e.json().then(u)}))},l={DEFAULT:\"Oh no!  Something went wrong, please try again\",USERNAME_REQUIRED:\"Username is required\",MESSAGE_REQUIRED:\"Message is required\",NETWORK_ERROR:\"There was a problem reaching your network, please try again\",LOGIN_REQUIRED:\"You must be logged in to view this content\",LOGIN_UNAUTHORIZED:\"You are not permitted to view this content\",UID_MISSING:\"UID is missing\",UID_UNKNOWN:\"UID is unknown\"},E=function(e){var t=e.user,n=e.onLogout;return s.a.createElement(\"ul\",{className:\"logout\"},t.isLoggedIn&&s.a.createElement(\"button\",{className:\"logout-button\",onClick:function(){fetch(\"/session\",{method:\"DELETE\"}).catch((function(){return Promise.reject({code:\"NETWORK_ERROR\"})})).then((function(e){return e.ok?e.ok:e.json().then(u)})).then((function(){n(\"\")})).catch((function(e){n(l[e.code||\"DEFAULT\"])}))}},\"Logout\"))},f=function(e){var t=e.onRefresh,n=Object(a.useState)(\"\"),c=Object(i.a)(n,2),o=c[0],r=c[1];return s.a.createElement(\"div\",{className:\"send-message\"},s.a.createElement(\"input\",{className:\"to-send-text\",value:o,onChange:function(e){return r(e.target.value)}}),s.a.createElement(\"button\",{className:\"send-message-button\",onClick:function(){var e;(e=o,fetch(\"/message\",{method:\"POST\",headers:new Headers({\"content-type\":\"application/json\"}),body:JSON.stringify({messageText:e})}).catch((function(){return Promise.reject({code:\"NETWORK_ERROR\"})})).then((function(e){return e.ok?e.json():e.json().then(u)}))).then((function(e){r(\"\"),t(e.messagesList,e.usersList,\"\")})).catch((function(e){r(\"\"),t([],{},l[e.code||\"DEFAULT\"])}))}},\"Send\"))},d=function(e){var t=e.map((function(e,t){return s.a.createElement(\"div\",{key:t},s.a.createElement(\"li\",null,s.a.createElement(\"div\",{className:\"message\"},s.a.createElement(\"div\",{className:\"meta-info\"},s.a.createElement(\"div\",{className:\"sender-info\"},s.a.createElement(\"span\",{className:\"sender\"},e.username)),s.a.createElement(\"div\",{className:\"message-info\"},s.a.createElement(\"span\",{className:\"time-stamp\"},e.timestamp))),s.a.createElement(\"p\",{className:\"message-text\"},e.text))))}));return s.a.createElement(\"ul\",{className:\"messages\"},t)},h=function(e){return s.a.createElement(\"div\",null,s.a.createElement(\"ul\",{className:\"users\"},Object.values(e).map((function(e,t){return s.a.createElement(\"li\",{key:t},s.a.createElement(\"div\",{className:\"user\"},s.a.createElement(\"span\",{className:\"sender\"},e.username)))}))))},g=function(e){var t=e.user,n=e.onReload;return s.a.createElement(\"div\",{className:\"app\"},s.a.createElement(f,{onRefresh:n}),s.a.createElement(\"div\",{className:\"display-panel\"},h(t.users),d(t.messages)))},p=n(4),N=n.n(p),R=function(e){var t=e.onLogin,n=Object(a.useState)(\"\"),c=Object(i.a)(n,2),o=c[0],r=c[1],E=Object(a.useState)(!1),f=Object(i.a)(E,2),d=f[0],h=f[1];return s.a.createElement(\"div\",{className:\"login\"},s.a.createElement(\"input\",{value:o,className:\"username\",onChange:function(e){return r(e.target.value)}}),d?s.a.createElement(\"img\",{alt:\"spinner\",src:N.a}):s.a.createElement(\"button\",{className:\"login-button\",onClick:function(){h(!0),function(e){return fetch(\"/session\",{method:\"POST\",headers:new Headers({\"content-type\":\"application/json\"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:\"NETWORK_ERROR\"})})).then((function(e){return e.ok?e.json():e.json().then(u)}))}(o).then((function(e){r(\"\"),m().then((function(n){t(e.username,n.messagesList,n.usersList,\"\")})).catch((function(e){t(\"\",[],{},l[e.code||\"DEFAULT\"])}))})).catch((function(e){r(\"\"),h(!1),t(\"\",[],{},l[e.code||\"DEFAULT\"])}))}},\"Login\"))},O=(n(12),function(){var e=Object(a.useState)({isLoggedIn:!1}),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(\"\"),f=Object(i.a)(o,2),d=f[0],h=f[1];Object(a.useEffect)((function(){fetch(\"/session\",{method:\"GET\"}).catch((function(){return Promise.reject({code:\"NETWORK_ERROR\"})})).then((function(e){return e.ok?e.json():e.json().then(u)})).then((function(e){m().then((function(t){c({isLoggedIn:!0,username:e.username,messages:t.messagesList,users:t.usersList})})).catch((function(e){h(l[e.code||\"DEFAULT\"])}))}))}),[]);var p;return p=n.isLoggedIn?s.a.createElement(g,{user:n,onReload:function(e,t,a){h(a),a||c(Object(r.a)({},n,{messages:e,users:t}))}}):s.a.createElement(R,{onLogin:function(e,t,n,a){h(a),a||c({isLoggedIn:!0,username:e,messages:t,users:n})}}),s.a.createElement(\"div\",{className:\"app\"},s.a.createElement(\"p\",{className:\"heading\"},\" Chat App \"),s.a.createElement(E,{user:n,onLogout:function(e){h(e),c({isLoggedIn:!1})}}),s.a.createElement(\"p\",{className:\"error\"},d),p)});Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(O,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);","extractedComments":[]}