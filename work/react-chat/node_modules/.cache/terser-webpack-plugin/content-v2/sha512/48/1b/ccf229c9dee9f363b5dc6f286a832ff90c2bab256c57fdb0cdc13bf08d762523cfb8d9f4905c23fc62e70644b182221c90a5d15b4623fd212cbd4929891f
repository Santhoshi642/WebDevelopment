{"map":{"version":3,"sources":["static/js/main.ebf680dd.chunk.js"],"names":["this","push","module","exports","__webpack_require__","p","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","objectSpread2","slicedToArray","convertNetworkError","err","code","convertServiceError","Promise","reject","fetchLists","fetch","method","catch","then","response","ok","json","error_messages","DEFAULT","USERNAME_REQUIRED","MESSAGE_REQUIRED","NETWORK_ERROR","LOGIN_REQUIRED","LOGIN_UNAUTHORIZED","UID_MISSING","UID_UNKNOWN","src_Logout","_ref","user","onLogout","_useState","useState","_useState2","Object","error","setError","a","createElement","className","isLoggedIn","onClick","errorMessages","src_SendMessage","onRefresh","message","setMessage","_useState3","_useState4","value","onChange","e","target","messageText","headers","Headers","content-type","body","JSON","stringify","messages","MessagesList","messageList","map","index","key","username","timestamp","text","UsersList","usersList","values","MessagesUsers","onReload","users","spinner","spinner_default","src_Login","onLogin","setUsername","isLoading","setIsLoading","_useState5","_useState6","alt","src","fetchLogin","userInfo","usersMessagesList","messagesList","src_App","userState","setUserState","content","Boolean","window","location","hostname","match","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console"],"mappings":"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"},"code":"(this[\"webpackJsonpreact-chat\"]=this[\"webpackJsonpreact-chat\"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n.p+\"static/media/spinner.414a23f5.svg\"},,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){\"use strict\";n.r(t);var a=n(0),s=n.n(a),c=n(3),r=n.n(c),o=(n(11),n(5)),i=n(1),u=function(e){return{code:\"NETWORK-ERROR\",err:e}},m=function(e){return Promise.reject(e)},l=function(){return fetch(\"/lists\",{method:\"GET\"}).catch(u).then((function(e){return e.ok?e.json():e.json().then(m)}))},E={DEFAULT:\"Oh no!  Something went wrong, please try again\",USERNAME_REQUIRED:\"Username is required\",MESSAGE_REQUIRED:\"Message is required\",NETWORK_ERROR:\"There was a problem reaching your network, please try again\",LOGIN_REQUIRED:\"You must be logged in to view this content\",LOGIN_UNAUTHORIZED:\"You are not permitted to view this content\",UID_MISSING:\"UID is missing\",UID_UNKNOWN:\"UID is unknown\"},h=function(e){var t=e.user,n=e.onLogout,a=useState(\"\"),c=Object(i.a)(a,2),r=c[0],o=c[1];return s.a.createElement(\"ul\",{className:\"logout\"},s.a.createElement(\"p\",{className:\"error\"},r),t.isLoggedIn&&s.a.createElement(\"button\",{className:\"logout-button\",onClick:function(){fetch(\"/session\",{method:\"DELETE\"}).catch(u).then((function(e){return e.ok?e.json():e.json().then(m)})).then((function(){return n()})).catch((function(e){o(errorMessages[e.code||\"DEFAULT\"])}))}},\"Logout\"))},f=function(e){var t=e.onRefresh,n=Object(a.useState)(\"\"),c=Object(i.a)(n,2),r=c[0],o=c[1],l=Object(a.useState)(\"\"),h=Object(i.a)(l,2),f=h[0],g=h[1];return s.a.createElement(\"div\",{className:\"send-message\"},s.a.createElement(\"p\",{className:\"error\"},f),s.a.createElement(\"input\",{className:\"to-send-text\",value:r,onChange:function(e){return o(e.target.value)}}),s.a.createElement(\"button\",{className:\"send-message-button\",onClick:function(){var e;r?(g(\"\"),(e=r,fetch(\"/message\",{method:\"POST\",headers:new Headers({\"content-type\":\"application/json\"}),body:JSON.stringify({messageText:e})}).catch(u).then((function(e){return e.ok?e.json():e.json().then(m)}))).then((function(e){o(\"\"),t(e)})).catch((function(e){g(E[e.code||\"DEFAULT\"])}))):g(E.MESSAGE_REQUIRED)}},\"Send\"))},g=function(e){var t=e.map((function(e,t){return s.a.createElement(\"div\",{key:t},s.a.createElement(\"li\",null,s.a.createElement(\"div\",{className:\"message\"},s.a.createElement(\"div\",{className:\"meta-info\"},s.a.createElement(\"div\",{className:\"sender-info\"},s.a.createElement(\"span\",{className:\"sender\"},e.username)),s.a.createElement(\"div\",{className:\"message-info\"},s.a.createElement(\"span\",{className:\"time-stamp\"},e.timestamp))),s.a.createElement(\"p\",{className:\"message-text\"},e.text))))}));return s.a.createElement(\"ul\",{className:\"messages\"},t)},d=function(e){return s.a.createElement(\"div\",null,s.a.createElement(\"ul\",{className:\"users\"},Object.values(e).map((function(e,t){return s.a.createElement(\"li\",{key:t},s.a.createElement(\"div\",{className:\"user\"},s.a.createElement(\"span\",{className:\"sender\"},e.username)))}))))},p=function(e){var t=e.user,n=e.onReload;return s.a.createElement(\"div\",{className:\"app\"},s.a.createElement(f,{onRefresh:n}),s.a.createElement(\"div\",{className:\"display-panel\"},d(t.users),g(t.messages)))},N=n(4),v=n.n(N),j=function(e){var t=e.onLogin,n=Object(a.useState)(\"\"),c=Object(i.a)(n,2),r=c[0],o=c[1],h=Object(a.useState)(!1),f=Object(i.a)(h,2),g=f[0],d=f[1],p=Object(a.useState)(\"\"),N=Object(i.a)(p,2),j=N[0],O=N[1];return s.a.createElement(\"div\",{className:\"login\"},s.a.createElement(\"p\",{className:\"error\"},j),s.a.createElement(\"input\",{value:r,className:\"username\",onChange:function(e){return o(e.target.value)}}),g?s.a.createElement(\"img\",{alt:\"spinner\",src:v.a}):s.a.createElement(\"button\",{className:\"login-button\",onClick:function(){r?(O(\"\"),d(!0),function(e){return fetch(\"/session\",{method:\"POST\",headers:new Headers({\"content-type\":\"application/json\"}),body:JSON.stringify({username:e})}).catch(u).then((function(e){return e.ok?e.json():e.json().then(m)}))}(r).then((function(e){l().then((function(n){t(e.username,n.messagesList,n.usersList)})).catch((function(e){O(E[e.code||\"DEFAULT\"])}))})).catch((function(e){O(E[e.code||\"DEFAULT\"]),d(!1)}))):O(E.USERNAME_REQUIRED)}},\"Login\"))},O=(n(12),function(){var e=Object(a.useState)({isLoggedIn:!1}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(\"\"),f=Object(i.a)(r,2),g=f[0],d=f[1];Object(a.useEffect)((function(){fetch(\"/session\",{method:\"GET\"}).catch(u).then((function(e){return e.ok?e.json():e.json().then(m)})).then((function(e){l().then((function(t){c({isLoggedIn:!0,username:e.username,messages:t.messagesList,users:t.usersList})})).catch((function(e){d(E[e.code||\"DEFAULT\"])}))}))}),[]);var N;return N=n.isLoggedIn?s.a.createElement(p,{user:n,onReload:function(e){c(Object(o.a)({},n,{messages:e}))}}):s.a.createElement(j,{onLogin:function(e,t,n){c({isLoggedIn:!0,username:e,messages:t,users:n})}}),s.a.createElement(\"div\",{className:\"app\"},s.a.createElement(\"p\",{className:\"heading\"},\" Chat App \"),s.a.createElement(\"p\",{className:\"error\"},g),s.a.createElement(h,{user:n,onLogout:function(){c({isLoggedIn:!1}),d(\"\")}}),N)});Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(O,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);","extractedComments":[]}